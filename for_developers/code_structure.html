

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Code structure &mdash; avbmc  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Build with g++ (for developers)" href="build_cpp.html" />
    <link rel="prev" title="MPI parallelisation" href="../examples/4_mpi_parallelisation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> avbmc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About AVBMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/installation.html">Installing and importing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/installation.html#initializing-system">Initializing system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/system_constants.html">Setting system constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/forcefield.html">Setting forcefield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/particles.html">Adding particles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/boundary.html">Setting boundary conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/constraints.html">Adding constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/moves.html">Adding moves</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/sampler.html">Setting sampler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/rng.html">Setting random number generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/run.html">Running the code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/outputs.html">System outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/statistics.html">Statistics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/1_lennardjones_nvt.html">Canonical ensemble simulations with Lennard-Jones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/2_lennardjones_upt.html">Grand-canonical simulations with Lennard-Jones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/3_vashishta_upt.html">Grand-canonical ensemble studies with Vashishta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/4_mpi_parallelisation.html">MPI parallelisation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#code-chart">Code Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extending-library">Extending Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changing-framework">Changing Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-classes">Other Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_cpp.html">Build with g++ (for developers)</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_style.html">Code Style</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">avbmc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Code structure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/for_developers/code_structure.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="code-structure">
<h1>Code structure<a class="headerlink" href="#code-structure" title="Permalink to this heading">Â¶</a></h1>
<p>The AVBMC code contains several thousand lines of code, and no matter
how much effort we put in making it clean, it still can easily be
confusing. It is oriented about the <code class="docutils literal notranslate"><span class="pre">System</span></code> class, which manages
variables that are global for the entire system. This includes the
dimensionality, different moves, the sampler and random number generator.
Also, the system consists of one or several boxes.</p>
<p>Each box is initialized with a boundary object giving the boundary
conditions of the box. The current boundary conditions are <code class="docutils literal notranslate"><span class="pre">Periodic</span></code>
and <code class="docutils literal notranslate"><span class="pre">Open</span></code>. Furthermore, all particle types in the box have to be covered by the
<code class="docutils literal notranslate"><span class="pre">ForceField</span></code> object. <code class="docutils literal notranslate"><span class="pre">LennardJones</span></code>, <code class="docutils literal notranslate"><span class="pre">Vashishta</span></code> and <code class="docutils literal notranslate"><span class="pre">IdealGas</span></code> are the
available force-fields. Particle constraints can be assigned to the box from a
<code class="docutils literal notranslate"><span class="pre">Constraint</span></code> object. Implemented constraints include <code class="docutils literal notranslate"><span class="pre">MaxDistance</span></code>,
<code class="docutils literal notranslate"><span class="pre">MinDistance</span></code>, <code class="docutils literal notranslate"><span class="pre">MaxNeigh</span></code>, <code class="docutils literal notranslate"><span class="pre">MinNeigh</span></code> and <code class="docutils literal notranslate"><span class="pre">Stillinger</span></code>. For molecular dynamics
runs, the box integrator has initialized from the <code class="docutils literal notranslate"><span class="pre">Integrator</span></code> set of classes,
including <code class="docutils literal notranslate"><span class="pre">Euler</span></code>, <code class="docutils literal notranslate"><span class="pre">EulerCromer</span></code>, <code class="docutils literal notranslate"><span class="pre">VelocityVerlet</span></code> and <code class="docutils literal notranslate"><span class="pre">RungeKutta4</span></code>.</p>
<p>For Monte Carlo runs, one or more moves have to be specified from the <code class="docutils literal notranslate"><span class="pre">Moves</span></code>
class. The <code class="docutils literal notranslate"><span class="pre">Moves</span></code> class belongs to the system rather than a box to make
inter-box moves possible. The available moves are <code class="docutils literal notranslate"><span class="pre">Trans</span></code>, <code class="docutils literal notranslate"><span class="pre">TransMH</span></code>, <code class="docutils literal notranslate"><span class="pre">AVBMCIn</span></code>,
<code class="docutils literal notranslate"><span class="pre">AVBMCOut</span></code>, <code class="docutils literal notranslate"><span class="pre">AVBMCMolIn</span></code> and <code class="docutils literal notranslate"><span class="pre">AVBMCMolOut</span></code>.</p>
<p>The sampling technique also have to be defined before a Monte Carlo run. Code
supports Metropolis sampling and umbrella sampling through the classes
<code class="docutils literal notranslate"><span class="pre">Umbrella</span></code> and <code class="docutils literal notranslate"><span class="pre">Metropolis</span></code>.</p>
<section id="code-chart">
<h2>Code Chart<a class="headerlink" href="#code-chart" title="Permalink to this heading">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>âââ System
    âââ Box
    â   âââ Particle
    â   âââ DistanceManager
    â   âââ Boundary
    â   â   âââ Open
    â   â   âââ Periodic
    â   â   ...
    â   âââ ForceField
    â   â   âââ LennardJones
    â   â   âââ Vashishta
    â   â   ...
    â   âââ Integrator
    â   â   âââ Euler
    â   â   âââ VelocityVerlet
    â   â   ...
    â   âââ Constraint
    â       âââ Stillinger
    â       âââ MinNeigh
    â       ...
    âââ Moves
    â   âââ Trans
    â   âââ AVBMCIn
    â   ...
    âââ Sampler
    â   âââ Metropolis
    â   âââ Umbrella
    â   ...
    âââ RandomNumberGenerator
        âââ MersenneTwister
        ...
</pre></div>
</div>
</section>
<section id="extending-library">
<h2>Extending Library<a class="headerlink" href="#extending-library" title="Permalink to this heading">Â¶</a></h2>
<p>The code has be written to make it easy to extend it without changing the basic
framework. This including adding new boundary conditions, force-fields,
integrators, constraints, moves, samplers and random number generators. To add
a class, look at the existing classes and try to modify it for your purposes.</p>
</section>
<section id="changing-framework">
<h2>Changing Framework<a class="headerlink" href="#changing-framework" title="Permalink to this heading">Â¶</a></h2>
<p>If the current framework does not match your needs, please contact the
developers.</p>
</section>
<section id="other-classes">
<h2>Other Classes<a class="headerlink" href="#other-classes" title="Permalink to this heading">Â¶</a></h2>
<p>There is a bunch of classes not mentioned yet, that is <code class="docutils literal notranslate"><span class="pre">Thermo</span></code> and <code class="docutils literal notranslate"><span class="pre">Dump</span></code>, and
a couples of utility files <code class="docutils literal notranslate"><span class="pre">init_position.cpp</span></code> and <code class="docutils literal notranslate"><span class="pre">init_velocity.cpp</span></code>.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="build_cpp.html" class="btn btn-neutral float-right" title="Build with g++ (for developers)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../examples/4_mpi_parallelisation.html" class="btn btn-neutral float-left" title="MPI parallelisation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Even Marius Nordhagen.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>